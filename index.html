<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>E-commerce Shop</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; background:#f5f5f5; }
  header { background:white; padding:15px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
  .top-bar { display:flex; justify-content:space-between; align-items:center; }
  .search-box input { padding:8px; width:200px; }
  .cart-btn { background:#e91e63; color:white; border-radius:50%; width:50px; height:50px;
              text-align:center; line-height:50px; font-size:22px; position:relative; cursor:pointer; }
  .cart-count { position:absolute; top:5px; right:5px; background:yellow; color:black;
                border-radius:50%; padding:2px 6px; font-size:12px; font-weight:bold; }
  .filter-bar { background:#fff; padding:10px; text-align:center; }
  .filter-bar button { margin:0 5px; padding:8px 12px; cursor:pointer; }
  .product-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:15px; padding:20px; }
  .product-card { background:white; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); padding:10px; text-align:center; }
  .product-card img { width:100%; border-radius:8px; cursor:pointer; }
  .price { color:#e91e63; font-weight:bold; }
  .old-price { text-decoration:line-through; color:#999; font-size:14px; margin-left:5px; }
  button.add-to-cart { margin-top:10px; padding:8px 12px; background:#007bff; color:white; border:none; border-radius:5px; cursor:pointer; }
  /* Image Popup */
  .popup { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); align-items:center; justify-content:center; z-index:1000; }
  .popup img { max-width:90%; max-height:90%; border-radius:10px; }
</style>
</head>
<body>

<header>
  <div class="top-bar">
    <div class="search-box">
      <input type="text" id="searchInput" placeholder="‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ï‡¶∞‡ßÅ‡¶®...">
    </div>
    <div class="cart-btn" onclick="openCart()">üõí<span class="cart-count" id="cartCount">0</span></div>
  </div>
</header>

<div class="filter-bar">
  <button onclick="filterProducts('all')">‡¶∏‡¶¨</button>
  <button onclick="filterProducts('‡¶™‡ßÅ‡¶∞‡ßÅ‡¶∑‡¶¶‡ßá‡¶∞ ‡¶™‡ßã‡¶∂‡¶æ‡¶ï')">‡¶™‡ßÅ‡¶∞‡ßÅ‡¶∑‡¶¶‡ßá‡¶∞ ‡¶™‡ßã‡¶∂‡¶æ‡¶ï</button>
  <button onclick="filterProducts('‡¶Æ‡¶π‡¶ø‡¶≤‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡ßã‡¶∂‡¶æ‡¶ï')">‡¶Æ‡¶π‡¶ø‡¶≤‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡ßã‡¶∂‡¶æ‡¶ï</button>
  <button onclick="filterProducts('‡¶Ö‡¶´‡¶æ‡¶∞')">‡¶Ö‡¶´‡¶æ‡¶∞</button>
</div>

<div class="product-grid" id="productGrid"></div>

<!-- Image Popup -->
<div class="popup" id="imgPopup" onclick="this.style.display='none'">
  <img id="popupImg" src="">
</div>

<script src="products.js"></script>
<script>
// ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶°
let cart = JSON.parse(localStorage.getItem('cart')) || [];
function saveCart() {
  localStorage.setItem('cart', JSON.stringify(cart));
}
function updateCartCount() {
  const cartCount = cart.reduce((sum, item) => sum + item.qty, 0);
  document.getElementById('cartCount').textContent = cartCount;
}
function openCart() {
  window.location.href = 'checkout.html';
}

// ‡¶®‡¶§‡ßÅ‡¶® Add to Cart ‚Üí ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø Checkout
function addToCart(productId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  cart = []; // ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø
  cart.push({ ...product, qty: 1 });
  saveCart();
  window.location.href = 'checkout.html';
}

// ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞
let filteredProducts = [...products];
function renderProducts() {
  const grid = document.getElementById('productGrid');
  grid.innerHTML = '';
  filteredProducts.forEach(p => {
    grid.innerHTML += `
      <div class="product-card">
        <img src="${p.img}" alt="${p.name}" onclick="showImage('${p.img}')">
        <h4>${p.name}</h4>
        <p class="price">‡ß≥${p.price}.00 <span class="old-price">‡ß≥${p.oldPrice}.00</span></p>
        <p>Size: ${p.sizes.join(', ')}</p>
        <button class="add-to-cart" onclick="addToCart(${p.id})">Add to Cart</button>
      </div>
    `;
  });
}

// ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞
function filterProducts(cat) {
  if (cat === 'all') {
    filteredProducts = [...products];
  } else {
    filteredProducts = products.filter(p => p.category === cat);
  }
  renderProducts();
}

// ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö
document.getElementById('searchInput').addEventListener('input', function() {
  const searchVal = this.value.toLowerCase();
  filteredProducts = products.filter(p => p.name.toLowerCase().includes(searchVal));
  renderProducts();
});

// ‡¶á‡¶Æ‡ßá‡¶ú Popup
function showImage(src) {
  document.getElementById('popupImg').src = src;
  document.getElementById('imgPopup').style.display = 'flex';
}

updateCartCount();
renderProducts();
</script>
</body>
</html>
